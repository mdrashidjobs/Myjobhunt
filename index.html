<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Job Hunt</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { font-family: Arial, sans-serif; background:#f9f9f9; margin:0; padding:0; }
h1 { text-align:center; margin-top:20px; }
hr { border:1px solid #ccc; margin:10px 0; }
.tabs { display:flex; justify-content:center; margin:20px 0; flex-wrap:wrap; }
.tab-button { padding:10px 15px; margin:5px; cursor:pointer; border:1px solid #ccc; border-radius:5px; background:#fff; }
.tab-button.active { background:#007bff; color:#fff; }
.tab-content { display:none; padding:20px; background:#fff; margin:0 10px 20px 10px; border-radius:5px; }
.tab-content.active { display:block; }
.job-block { border-bottom:1px dashed #aaa; padding:10px 0; margin-bottom:10px; }
.job-block:last-child { border:none; }
h3 { scroll-margin-top:80px; }
#adContainer { text-align:center; margin:20px 0; }
</style>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3037151964199001" crossorigin="anonymous"></script>
</head>
<body>

<div id="adContainer">
    <ins class="adsbygoogle"
         style="display:block; text-align:center; margin: 10px auto;"
         data-ad-client="ca-pub-3037151964199001"
         data-ad-slot="1234567890"
         data-ad-format="auto"
         data-full-width-responsive="true"
         data-adtest="on"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</div>

<h1>MY JOB HUNT</h1>
<p style="text-align:center;" id="currentDate"></p>
<hr>

<div class="tabs" id="tabsContainer"></div>
<div id="tabContentsContainer"></div>

<script>
// Categories
const categories = ["Admin","Finance","IT","Engineering","Safety","Healthcare","Sales","Drivers"];
const categoryNames = {
    Admin:"Admin / Office",
    Finance:"Finance / Accounting",
    IT:"IT / Technical",
    Engineering:"Engineering / Technical",
    Safety:"Safety",
    Healthcare:"Healthcare",
    Sales:"Sales / Marketing",
    Drivers:"Drivers / Logistics"
};

// Fetch JSON dynamically
fetch('jobs.json')
.then(res => res.json())
.then(data => {
    const tabsContainer = document.getElementById('tabsContainer');
    const tabContentsContainer = document.getElementById('tabContentsContainer');

    categories.forEach((cat, index) => {
        // Tab buttons
        const btn = document.createElement('div');
        btn.className = 'tab-button' + (index===0?' active':'');
        btn.dataset.tab = cat;
        btn.innerText = categoryNames[cat];
        tabsContainer.appendChild(btn);

        // Tab content
        const contentDiv = document.createElement('div');
        contentDiv.id = cat;
        contentDiv.className = 'tab-content' + (index===0?' active':'');
        
        // Sort dates descending
        const dates = Object.keys(data).sort((a,b)=>new Date(b)-new Date(a));
        dates.forEach(date=>{
            if(data[date][cat].length){
                const dateHeader = document.createElement('h2');
                dateHeader.innerText = `ðŸ“Œ ${date}`;
                contentDiv.appendChild(dateHeader);

                data[date][cat].forEach((job, i)=>{
                    const jobDiv = document.createElement('div');
                    jobDiv.className='job-block';
                    jobDiv.id=`${cat}_${date}_${i}`;
                    const jobLines = job.split('\n');
                    jobDiv.innerHTML = jobLines.map(line=>`<p>${line}</p>`).join('');
                    contentDiv.appendChild(jobDiv);
                });
            }
        });

        tabContentsContainer.appendChild(contentDiv);
    });

    document.getElementById('currentDate').innerText = `Last Updated: ${dates[0]}`;
    
    // Tab switching
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');
    tabButtons.forEach(button=>{
        button.addEventListener('click', ()=>{
            const target = button.dataset.tab;
            tabButtons.forEach(b=>b.classList.remove('active'));
            button.classList.add('active');
            tabContents.forEach(tc=>{
                tc.classList.remove('active');
                if(tc.id===target) tc.classList.add('active');
            });
        });
    });
    
    // Bookmark linking
    if(window.location.hash){
        const hash = window.location.hash.substring(1);
        const jobElement = document.getElementById(hash);
        if(jobElement){
            const parentTab = jobElement.closest('.tab-content');
            if(parentTab){
                tabContents.forEach(tc=>tc.classList.remove('active'));
                parentTab.classList.add('active');
                tabButtons.forEach(b=>{
                    b.classList.remove('active');
                    if(b.dataset.tab===parentTab.id) b.classList.add('active');
                });
                jobElement.scrollIntoView({behavior:'smooth', block:'start'});
            }
        }
    }

})
.catch(err=>console.error('Error loading jobs.json:', err));
</script>
</body>
</html>
