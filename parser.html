<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Job Parser</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
textarea { width: 100%; height: 400px; margin-bottom: 10px; }
button { padding: 10px 20px; font-size: 16px; cursor: pointer; }
</style>
</head>
<body>
<h2>Paste WhatsApp Jobs Below</h2>
<textarea id="jobText" placeholder="Paste jobs here..."></textarea>
<br>
<button onclick="parseAndDownload()">Parse & Download JSON</button>

<script>
function parseAndDownload() {
    const text = document.getElementById('jobText').value;
    if(!text.trim()){ alert('Paste some jobs first!'); return; }

    const lines = text.split('\n');
    const data = {};
    let currentDate = '';
    let currentCategory = '';

    lines.forEach(line => {
        line = line.trim();
        if(!line) return;

        // Detect date line
        if(line.startsWith('Date:')){
            currentDate = line.replace('Date:','').trim();
            data[currentDate] = {
                "Admin":[], "Finance":[], "IT":[], "Engineering":[],
                "Safety":[], "Healthcare":[], "Sales":[], "Drivers":[]
            };
        }
        // Detect category line
        else if(line.includes('Administrative') || line.includes('Admin')) currentCategory = 'Admin';
        else if(line.includes('Finance')) currentCategory = 'Finance';
        else if(line.includes('IT')) currentCategory = 'IT';
        else if(line.includes('Engineering')) currentCategory = 'Engineering';
        else if(line.includes('Safety')) currentCategory = 'Safety';
        else if(line.includes('Healthcare')) currentCategory = 'Healthcare';
        else if(line.includes('Sales')) currentCategory = 'Sales';
        else if(line.includes('Drivers')) currentCategory = 'Drivers';
        // Job lines
        else if(currentDate && currentCategory){
            data[currentDate][currentCategory].push(line);
        }
    });

    const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'jobs.json';
    a.click();
}
</script>
</body>
</html>
